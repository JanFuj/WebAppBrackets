@model IEnumerable<TestWebAppCoolName.Models.Blog>


@{
    ViewBag.Title = "Admin Blog";
}

<body class="body--admin">
    @Html.Partial("_LoginPartial")
    <main class="main">
        <div class="admin-list-header">
            <h1>Blog</h1>
            @Html.ActionLink("Vytvořit", "NewBlog", null, new { @class = "button" })
        </div>


        <ul class="admin-list">

            @foreach (var item in Model)
            {

                <li class="admin-list__item">
                    <div class="admin-list__cell admin-list__cell--info">
                        <div class="">@Html.DisplayFor(modelItem => item.Name)</div>
                        @*<div class="">@Html.DisplayFor(modelItem => item.Author.FullName)</div>*@
                    </div>
                    <div class="admin-list__cell admin-list__cell--buttons">
                        @Html.ActionLink("Upravit", "EditBlog", "Admin", new { id = item.Id }, new { @class = "link--gradient" }) 
                        @Html.ActionLink("Náhled", "Index", "Blog", new { title = item.UrlTitle, preview = true }, new { @class = "link--gradient" }) 
                        @Html.ActionLink("Smazat", "DeleteBlog", "Admin", new { id = item.Id }, new { @class = "link--gradient" }) 
                        @if (User.IsInRole(TestWebAppCoolName.Models.Roles.Admin))
                        {
                            if (item.Approved)
                            {
                                @Html.ActionLink("Od-Publikovat", "ApproveBlog", "Admin", new { id = item.Id, approve = false }, new { @class = "link--gradient" })
                            }
                            else
                            {
                                @Html.ActionLink("Publikovat", "ApproveBlog", "Admin", new { id = item.Id, approve = true }, new { @class = "link--gradient" })
                            }
                        }
                    </div>
                </li>
            }

        </ul>

    </main>
</body>
